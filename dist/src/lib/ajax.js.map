{"version":3,"sources":["../../../src/lib/ajax.js"],"names":["ajax","create","baseURL","process","env","NODE_ENV","headers","timeout","interceptors","request","use","window","sessionStorage","localStorage","token","config","reject","err","response","res","data","status","resolve","alert","errMsg","install","Vue","prototype","$ajax"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;;;AACA;AACA,IAAMA,OAAO,gBAAMC,MAAN,CAAa;AACxBC,WAASC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,uBAAxC,GAAkE,uBADnD;AAExBC,WAAS;AACP,oBAAgB;AADT,GAFe;AAKxBC,WAAS,KALe,CAKT;AALS,CAAb,CAAb;AAOA;AACAP,KAAKQ,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,kBAAU;AACtC,MAAIC,OAAOC,cAAP,IAAyBD,OAAOE,YAApC,EAAkD;AAChD,QAAID,eAAeE,KAAf,IAAwBD,aAAaC,KAAzC,EAAgD;AAC9CC,aAAOT,OAAP,CAAe,OAAf,IAA0BM,eAAeE,KAAf,IAAwBD,aAAaC,KAA/D;AACD;AACF;AACD,SAAOC,MAAP;AACD,CAPD,EAOG,eAAO;AACR,SAAO,kBAAQC,MAAR,CAAeC,GAAf,CAAP;AACD,CATD;AAUA;AACAjB,KAAKQ,YAAL,CAAkBU,QAAlB,CAA2BR,GAA3B,CAA+B,oBAAY;AACzC,MAAIS,MAAMD,SAASE,IAAnB;AACA,MAAIF,SAASG,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,WAAO,kBAAQC,OAAR,CAAgBH,GAAhB,CAAP;AACD,GAFD,MAEO;AACLI,UAAMJ,IAAIK,MAAV;AACA,WAAO,kBAAQF,OAAR,EAAP;AACD;AACF,CARD,EAQG,eAAO;AACR,SAAO,kBAAQN,MAAR,CAAeC,GAAf,CAAP;AACD,CAVD;;kBAYe;AACbQ,SADa,mBACLC,GADK,EACA;AACXA,QAAIC,SAAJ,CAAcC,KAAd,GAAsB5B,IAAtB;AACD,GAHY;;AAIbA;AAJa,C","file":"ajax.js","sourcesContent":["import Vue from 'vue'\r\nimport axios from 'axios'\r\n// 创建一个axios实例\r\nconst ajax = axios.create({\r\n  baseURL: process.env.NODE_ENV === 'production' ? 'http://localhost:3001' : 'http://localhost:3001',\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  },\r\n  timeout: 25000 // 请求超时时间\r\n})\r\n// 注册请求拦截器\r\najax.interceptors.request.use(config => {\r\n  if (window.sessionStorage && window.localStorage) {\r\n    if (sessionStorage.token || localStorage.token) {\r\n      config.headers['token'] = sessionStorage.token || localStorage.token\r\n    }\r\n  }\r\n  return config\r\n}, err => {\r\n  return Promise.reject(err)\r\n})\r\n// 注册响应拦截器\r\najax.interceptors.response.use(response => {\r\n  let res = response.data\r\n  if (response.status === 200) {\r\n    return Promise.resolve(res)\r\n  } else {\r\n    alert(res.errMsg)\r\n    return Promise.resolve()\r\n  }\r\n}, err => {\r\n  return Promise.reject(err)\r\n})\r\n\r\nexport default {\r\n  install(Vue) {\r\n    Vue.prototype.$ajax = ajax\r\n  },\r\n  ajax\r\n}\r\n"]}