{"version":3,"sources":["../../../src/lib/ajax.js"],"names":["Object","defineProperty","exports","value","_promise","require","_promise2","_interopRequireDefault","_vue","_vue2","_axios","_axios2","obj","__esModule","default","ajax","create","baseURL","process","env","NODE_ENV","headers","timeout","interceptors","request","use","config","window","sessionStorage","localStorage","token","err","reject","response","res","data","status","resolve","alert","errMsg","install","Vue","prototype","$ajax"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,SAAO;AADoC,CAA7C;;AAIA,IAAIC,WAAWC,QAAQ,+BAAR,CAAf;;AAEA,IAAIC,YAAYC,uBAAuBH,QAAvB,CAAhB;;AAEA,IAAII,OAAOH,QAAQ,KAAR,CAAX;;AAEA,IAAII,QAAQF,uBAAuBC,IAAvB,CAAZ;;AAEA,IAAIE,SAASL,QAAQ,OAAR,CAAb;;AAEA,IAAIM,UAAUJ,uBAAuBG,MAAvB,CAAd;;AAEA,SAASH,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/F;AACA,IAAIG,OAAOJ,QAAQG,OAAR,CAAgBE,MAAhB,CAAuB;AAChCC,WAASC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,uBAAxC,GAAkE,uBAD3C;AAEhCC,WAAS;AACP,oBAAgB;AADT,GAFuB;AAKhCC,WAAS,KALuB,CAKjB;AALiB,CAAvB,CAAX;AAOA;AACAP,KAAKQ,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAUC,MAAV,EAAkB;AAC9C,MAAIC,OAAOC,cAAP,IAAyBD,OAAOE,YAApC,EAAkD;AAChD,QAAID,eAAeE,KAAf,IAAwBD,aAAaC,KAAzC,EAAgD;AAC9CJ,aAAOL,OAAP,CAAe,OAAf,IAA0BO,eAAeE,KAAf,IAAwBD,aAAaC,KAA/D;AACD;AACF;AACD,SAAOJ,MAAP;AACD,CAPD,EAOG,UAAUK,GAAV,EAAe;AAChB,SAAOzB,UAAUQ,OAAV,CAAkBkB,MAAlB,CAAyBD,GAAzB,CAAP;AACD,CATD;AAUA;AACAhB,KAAKQ,YAAL,CAAkBU,QAAlB,CAA2BR,GAA3B,CAA+B,UAAUQ,QAAV,EAAoB;AACjD,MAAIC,MAAMD,SAASE,IAAnB;AACA,MAAIF,SAASG,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,WAAO9B,UAAUQ,OAAV,CAAkBuB,OAAlB,CAA0BH,GAA1B,CAAP;AACD,GAFD,MAEO;AACLI,UAAMJ,IAAIK,MAAV;AACA,WAAOjC,UAAUQ,OAAV,CAAkBuB,OAAlB,EAAP;AACD;AACF,CARD,EAQG,UAAUN,GAAV,EAAe;AAChB,SAAOzB,UAAUQ,OAAV,CAAkBkB,MAAlB,CAAyBD,GAAzB,CAAP;AACD,CAVD;;AAYA7B,QAAQY,OAAR,GAAkB;AAChB0B,WAAS,SAASA,OAAT,CAAiBC,GAAjB,EAAsB;AAC7BA,QAAIC,SAAJ,CAAcC,KAAd,GAAsB5B,IAAtB;AACD,GAHe;;AAKhBA,QAAMA;AALU,CAAlB;AAOA","file":"ajax.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _vue = require('vue');\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _axios = require('axios');\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 创建一个axios实例\nvar ajax = _axios2.default.create({\n  baseURL: process.env.NODE_ENV === 'production' ? 'http://localhost:3001' : 'http://localhost:3001',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 25000 // 请求超时时间\n});\n// 注册请求拦截器\najax.interceptors.request.use(function (config) {\n  if (window.sessionStorage && window.localStorage) {\n    if (sessionStorage.token || localStorage.token) {\n      config.headers['token'] = sessionStorage.token || localStorage.token;\n    }\n  }\n  return config;\n}, function (err) {\n  return _promise2.default.reject(err);\n});\n// 注册响应拦截器\najax.interceptors.response.use(function (response) {\n  var res = response.data;\n  if (response.status === 200) {\n    return _promise2.default.resolve(res);\n  } else {\n    alert(res.errMsg);\n    return _promise2.default.resolve();\n  }\n}, function (err) {\n  return _promise2.default.reject(err);\n});\n\nexports.default = {\n  install: function install(Vue) {\n    Vue.prototype.$ajax = ajax;\n  },\n\n  ajax: ajax\n};\n//# sourceMappingURL=ajax.js.map"]}